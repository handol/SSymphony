<!DOCTYPE html>
<head>
	<meta charset="utf-8">
	<title>Chatting</title>
	<link rel="stylesheet" href="./css/chatting.css">
	<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
	<script src="./lib/socket.io.js"></script>	
	<script>	
		
		var socket = io.connect('http://61.43.139.69:50007/group');	// socket.io 서버에 접속
		var tmp_group = 0;
		var tmp_tool = 0;
		var tmp_client = 0;
		var client_color = new Array( "none", "#99FF99", "#CCCC99", "#0099FF", "#CCFFCC", "#FFFF66", "#FF9999", "#669999", "#9999FF", "#00CCCC", "#CC9900");		
			
		$(document).ready(function() {
			initChatting("chatting", "1");			
		});

		////  리스트 초기 설정해주는 함수  ////
		function initChatting( tool, group ){
			tmp_tool = tool;
			tmp_group = "group"+group;

			socket.emit('join_room', { group: tmp_group });
			socket.emit('set_client', { group: tmp_group, user: "godong4" });
			socket.emit('set_data', { group: tmp_group, tool: "chatting" });
		}

		
		////  현재 group, tool에 해당하는 데이터 서버에서 응답 받는 함수_tree  ////
		socket.on('get_data', function (data) {

			var tmp_user = data.id;
			var tmp_val = data.val;	

			var tmp_tag = "<div id="+tmp_user+">"+tmp_val+"</div>";

			$('.chatting_space').append(tmp_tag);
			$('.chatting_space').append(tmp_tag);
			$('.chatting_space').append(tmp_tag);
			$('.chatting_space').append(tmp_tag);
			$('.chatting_space').append(tmp_tag);
			$('.chatting_space').append(tmp_tag);


			var offset = $('.chatting_space').offset().top;
			console.log(offset);
	
			$('.chatting_space').animate({scrollTop: $('.chatting_space')[0].scrollHeight});


		});

	</script>
</head>
<body>

	<div class="chatting_tool" id="chatting">
		<div class="chatting_space">

		</div>
		<div class="chatting_input_space">
			<input type="text" class="chatting_input"/>
		</div>
	</div>

</body>
</html>
